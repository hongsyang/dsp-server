package cn.shuzilm.util;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.net.URLDecoder;
import java.util.zip.GZIPInputStream;
import java.util.zip.GZIPOutputStream;

public class ZipUtil {   
    // 压缩   
      public static String compress(String str) throws IOException {
        if (str == null || str.length() == 0) {   
          return str;   
        }   
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        GZIPOutputStream gzip = new GZIPOutputStream(out);
        gzip.write(str.getBytes());   
        gzip.close();   
        return out.toString("ISO-8859-1");   
      }   
  
      // 解压缩   
      public static String uncompress(String str) throws IOException {
        if (str == null || str.length() == 0) {
          return str;   
        }
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        ByteArrayInputStream in = new ByteArrayInputStream(str
            .getBytes("ISO-8859-1"));   
//        .getBytes("UTF-8"));   
        GZIPInputStream gunzip = new GZIPInputStream(in);
        byte[] buffer = new byte[256];   
        int n;   
        while ((n = gunzip.read(buffer)) >= 0) {   
          out.write(buffer, 0, n);   
        }
        // toString()使用平台默认编码，也可以显式的指定如toString("GBK")   
        return out.toString();   
      }
  
      // 测试方法   
      public static void main(String[] args) throws IOException {
        String str = "%1F%8B%08%00%00%00%00%00%00%00%DDY%DB%8E%DB%C8%11%FD%95%60%00%3E%D9C4%BB%D9%CD%EE%7D%A3n%CE%60%7D%19%AFoH%82%40%A0D%8E%C4%1D%91%D4%F02%B2f%B5%40%F2%98%E45OA%7E+%BF%90%FF%C9%22%F9%8BT%15%29%8DDqF%E3%C0%016%B1%0D%B1%BB%D9%5D%F7%3AUM%FFpv%91%16e%B0XD%A1%BF%5C%5E%A4W%D9%D97%BF%F9%E1%CC%BF%7C%7D%F6%CD%D9%A4%9AD%B1%5D%C6%E9%AC%98Wg%CF%CF.p%D1%81%81%FF%B1%0F%23i%0B%5Bm%1C%E6%E1%0A%BE%B2%FA%DC%F2%995T%96%F6%2C%C3%AD%A1k%F5%7C%FC7%94%96a%96%DF%A7%15c%F9%AA%DEy%F6%E3%F3-%ABi2%B1%97%93c%1E%C2vl%B6%11%0E%DB%F1%40%EA%3D%CB%F4%88%A8%B4%B4%B2%86%C62%C2%EA%C1%40%5B%BEc%E9%FE%3E%DD%D4%0E%92%E0.K%ED%E4%DD%3C%5B%DAA%1A%E6Y%1Cv%29%23mf%2B%C66%92I%C6%98%BAgHZ%18%1F%F9%F8%86%B40%96f%96%F6%91a%CF%B5%FC%815%F4%2C%8Do%0F9%DF%CD%B3t%B6%AER%BBX%C5%CBh%11%17%E5m%1C%AD%CA%A8%28%8F%F9%A3%9A%CE%96%E7%3B%DC%FF%12%F6%7F%84%FD%EFq%FF%1E%DD%2C%B1%DFVi%90%1F%D3%D0d%2C%23%EFE%07%FB%0C%AD%5Em%2Ba%F9%E4%09%0D%FA%8C%D0%8C%06%84%96%9DF%03%16A%98M%22%3B%8F%820%EA%E0%E4%A0%B1%F8%C6q%94%60b%CB%CE%C7%23%CF%FCi%9EM%82%B6%C4%8D%DD%ED0%28%030%C0%228a%81%01%EC%7B%8F%FB%C6%EF%06%DF%3E%40%EB6JC%88%CDn_%3A%7C%A3%99%90%0Eg%BB%D0y%91e%B3E%F4%ECr%11%AC%F7%82G%92w%BD%23%1Ek%F4Uw%40%3A%1B%B5%B3%B1_o%A4+%D4%5B%7B%8E%C0%E6-%82+%F24%0B%23%0C%85r%3E%ED%B4%E9%BE%FE%17I0%8B%DE%B5hD%B3%9D%EE%FE%22%5E%06%EB%17K%88%B0%A8%2B%10%14%F8%87%B9L0%B9%F1%D4%7E%EE%18%17%C5%C3%98%EE%A1%C0%A0%BE%3F%B4%CC%80%E4%E7V%CF%A1%08%E9%83%22m%DE%9F%83d%B9%88%EC%E0%94%E7%60%C3%03%27%C3%DB%28%2F%E3%22J%A2%B4L%B24.%B3%BC%D3%7D%07%E4%FCW%E3%8E%048A3%8C%92%EC%14%DD%FD%93%AFv%27%07x%F2%01%5E%B5%E9%C7O%21%DEl%7D%025D%83%22%BC%3EA%90%A2%0A2yH%0Es%11_%C1%97%BE%40%1C%82AO%22%26%02%08%F5%04e%BBG%DE%1D%01%89%07%B8%EF%D2%10X%8F%0D%7Fj2B.%E2%EEn%9A%C9%3A%CD%CAh%19t%80%EB%01%B5W%EB%D7%CD%BEn%3A+%D2S+r%F0%ED%23qQ%C4%F8H%A3%F2%29%DEzG%9B_%C3%E6G%FCuw%82%C8%AF%5B%E7%E6%C1r%B9%8E%16%14%5E%85%DD%04%84%9F%C6I%B0%B0on%BA%88q%B1%E1%E2%DE%E1%80K%7Dr%AFD%B8%D6%82%FC%0C%B5O%EF%0D%A8%9A%9A%B6%93%BF%C7%0C%80%CAc%83%086%F0%5B%1Cssm%0E%28%E6h%23t%AB%CE5EZ%5B%A6%5D%11n%E2y%96%21%CD%02R%A5%03t%04%D0%14%7C%23%A0x%0A%C6%05%DF%12%16%AAn%09%0C%C5%28+P%BFi%09%A0%80B%3D%DD%BE%EA%E4%B6%8C%F2%24%99u%80%A5%02%88%17%1B%21%0E%98h%B2%8B%A4%F8%07%DA%DEwo%DE%BC%EF%22%0B%9B%ED%24%9B%C4%8B%A8%08%AE%3A4Q%80%F1%0A%9Cq_H%A9%5D%21%1E+%F6%C0%F2%A9%A2B%FA%F9m%B1%8B+%BD%AE%82%D8N%A2%B8%AC%82%B4%AB6%29%28%9C%5C%F1C%DA%24%F3%10%AB5V%A6%9E%E5%F3%E3%16%09%C9%87%95%1D%C6al%2F%8Bt%D6UD%84m6%E6%A0Y%02%24%80%1Ee%7F%A0%A9_Bk%81%26%AA%CD%21%CAo%E3%29+%C4%E9%BC%B9%CC%B3Y%1E%15%C5%8B%AA%CA%DB%C9%5Cd%F3%CA%8E%D3eU%26Q9%CFBX%98e%1D%3D%A4%07%7E%E4%1BW%F2%7D%91%A1W%84+%C1%9E%AA%87M%0AJ%3A%24%91%25z%D7%97%A4%8D%80%02%DE%C5%14%7Fn%E30%EA%90%DE%B5%3D%88z%D7%3B%EC%26%0F%B8Q%14%F9%5E%D3V%82%17%8C%D3fR%EC%8Ap%00%05d%0A%D8%90F%AB%A2%8B%9B%82%28r%D5a%27%D9%A3%BE%91%9A%2FT%84%D0%BCv%0B%14a%FF%11f%60%E8%60m%7F%9F%5Dw%04%AC%8B%D5%7E%E3%B2%3D%BD%A8%B9%D1%B2%01%8B%1E%0D%B0%82%D4%3C%07%C7%A8Q%06%D0%B6e%CD%A3%2Bn%B9%AD%A1%E1%F3%F6M%D7%CEi%60%E4%EDw%15m%16Q%3A%058%DC%A9ts%13f%ABt%91u%F7%98x%BD%80n%1C%B0%C4%E1%E6%00%17%7D%ECb%C0a%D8%CB%3C%95%D9%CDM%12%C4%9DH%C8%F0%12%E3pO%E9%5D%BE%BF%7DK%3D%3EG%C2%C0%07%ED%D6%F6%CC%96%7C%92t%E1%07%07%AA%92%8Fsh%90%B9%D0%7C%23%95s%A0%C1%90%28S%23%7E%E4s%2C%7E6%F6%94Kh%01%F3I%9C%A6%27%BBE%BC%26%5C%E2%EE%5E%BD%BBE%10k%80%BD%8As%28GEG%A0%D6%86v%8Cz%CC%B5%14%A8%08%D7%1E%B6%87G%B8WA%9D%9BA%22%94%AB%2C%BF%B6%9FR%BF%A9%E8%8E%B1D_%E5A%12%E19j%86%3A%AA%FA%3A%ABB%08Ml%2F%BA%1C%E8bR%1F6%B9%7D%94%1F%5D%E8%10n%D478%87%7C%D9%A7%E0%A9%DB%A9%83%1C%28%F3xy%7F%B7%E8l%FE%15%A1%95%D6g%87%F0%81%F6%F10%14%1B%8B%3Dt%AF%9A%DF%40%5DHF%10%F0%A7%AC%B3%97%BFu%B6j%E2%D0%BA%A8%C4%60%9A%F8s%DCQe%04%DEf7%BC%05tzk%8CV%D4%1167%15%11%1A%9E%E5%02%EA%7Bgm%D1%28%23%5C%A9%B8%FB%18%5C%D7%FD%E8h%8B%A4%94%A1%06%C0T%EF%B1%A4+%DF%1A%1B%7D%9C%AC%A1%B3X%C4%D3%A0%8C%B3%0E%85Z%1D%E43%7Fo%F3S%A9%3E%1C%96%5B%C2O9%FF%E3o%9F%9F%BD%E97_J%60%FC%FA%F2e%3D%F9%E1%EC%F2%25%92s%85%10%1CL%EF0%C9%CF%B73%F8K%25%FF%F5%FB%83-%0E%D3%E7%9F.F%17%F0%E6%05%1E%06%5D%CE%06%D1%ED%96%E0%E0%15%AC%FD%F2%83%FFix%F1%8B%17%9Ed%E7%EF9%B3%E7%AB%DDp%3B%80%E3%D0%0F%7FD%D2%12o%7D8%FF%D8%B4y%C8%95%8Csl%CB%CB%0B%12%98+%FD%DB%BA%89%FA%E9%0F%7F%FA%E9%AF%7F%FF%C7%1F%FF%06%03X%1E%F4v%02%3C%DBc%F6%EA%0D%2C%FF%F3%F7%7F%FE%D7%EF%FE%82%9B.%60%A6%95%8B%AC9w5%3C%D8%B9%AB%18X%80%B9%DCs%95%F6%E4%F9U%E4%06N%60%B4%0A%3D%070%9D%00%FD%C3E%A3%F2%C5%87%0F%F7%06%FD%14Mv%DF%A1%3E%7C%87%12%CE%CBriq%29%7C%F8%E1%23%FA%09%EC%CF%D3+%27%1FM%D3%ED%B2%18%DD%C1ux%0A%FE%BA%C6%D9%00%0C%AC%3D%94%F7%D3%9B%AD%D9%B91%82K%A9%EA4z%90%7CbK%8D%C4%EF%29C%233.%B2*%9FFDz%5E%05%AB%28%1E%CFf%C7%D4%99f%F2%14%F5I%10C%27%B7e%80%FD%031%B9%CA%89x%92%CD%B3%04%F9pU%14qHk%8C%A6W9%1DA%D5+x%0C%BF%A6%D5%AA%D9C%93eE%E3%AA+%DA%12%7CAO%DE%2F%EE%9A%05%07d%1C%23%81%E6E%194%2Fb%FA%9C0%E6c%88%9B%B1%18K%E1%12%C5I8%C6R4.%D7%CBZy%E7Hi%26%A4%F9B%A5%1B%85%BB%F49f%D8e%8B%EA%60%96GW4%5B%ADV%E3Z%8F%FF%C4%1Aj%D1%10%85%96C3%E30W%3A%D0%C1AT7%27%15%29%D1l%1A%8Cz%23%CF%0C%21%95%FB%8Ck%17%92%DC%1F%29G%98%91p%3Cw%E8%F6%E9%40%BA%EA%B6%196%1C%E2d%18%FE%2F%D9%0C%CC%24%99%07%2B%5C%3B%00%03%AE%2B%CDW6%99%02%06%7C%CFdWP%B0Z%26%A3%1F%FC%BCA%83%0A%AE34+%15F%FB_%0F%27y%B6%DA%BE%05%90%1Fc%CA%A1%05i%A1N%EFzX%26%0B%1A%C4i%18%7D%AE%A66.tH%C6%DC%13%CE%04%2B%DB%9F%E3+K%E3J%DF%83%0B%B0%81%0AN%C3%3C%9A%C5E%D9%884%9D%07%D0%CA%D5%9C%991%AE%F0%A4%F0%26%EAjj%02c%3Cx%06%E1%C4%285%99j%B7%A6%93%E5%21%0DF%BFr%3E%F9%97%80%7C%9CA1%90%9C%7C4%3A%14%D8%F1%3C%2357%8F%0B%8C%B0d%17q%1Al%21vV%3F%90%F09S%E7%8C%D7%C6%8EJ%E8%AC%CF%E3+%BD%BA%9B%A7%D7LK%03Q%60%87vc91Z%D5%F1%0AA%A3%8E%E4%80%3F%EC%84%1Ct%9B%3B%10%A4%01L%F0%C9c%02M%A7w%C9m%B5%E4%9E%F0%18cO%14%C8%D5R%99%13%02%B5%D3%B23%23GM%1Au%27%CD%A8%06%FC%C6k5tK%E8%93%F0%01%9D%29%3Dx%BD%A8%E9%D1%1B%EC%BF%1BRf%01%E6%D6%EFF%F5%A2%AAg5%AE%9B%D1%3EM%5D%E7po%B8O%D3%AF%0FhUCE%40%92%00%10%8C%9Dc%AB%B8%C6%F9B%AB%FC%BC%C1%0A%12%03%A0J%BAB*%A9%5C%C7%11%8E%F35%C1%0A6%E0g0%F9%25%60%B5%1B%FC%97%60%CA%F1%841%0Az%F7G%DD%18%E3%FF%3C%B4%5C%19%93%2F%CB%B4v%40%5CD%C4%84%D4%C7%D9%B2x%D8%89%3F%CB%8E%C5%81%0A%25%B5%D1_%C1%12%C1%82dQq%CD%A8*%AFt%ADw%D2x%092%EA%DEX%5D%E9%DE%E4%E46%B3%DD%FD%94%F6%9D%83%7C%ADg%BE%DEOw-%EA%87%ACm%99%D5%BE%00%D1%E3%29%AE%D0%5B%07%E4%CC%A7%F3c%23%40%3De%A7%B2%FA%96%3E%1F%EC%0C%80%CA%B4%09y%AE%27%9D%FF%AB%FE%0F.-%DAS%CA%E3P%9F%B8%D2%A0%9F%FE%AA%F0%00%26c%C6%3Bi%FB+%0D%16%EBb%5Dl%0B%1FY%DF.%3Ar%9B%7B%CC%D5%EA%04%C1iP%EC%91%BC%BF%3B%C1%FAyP%95%F3s%FC%FA%7B%0F6%2F%B3%19%B5%26b%D4%7C%15%26U%1A%BA%5B%CA%0D%ED.q%A9%A7Yfy%D9L%EA%C2%DCL%0CS%E2%08%A4%B8fBh%E6i%07%EE%D9%3F%FE%1B%A5%D4Br%9D+%00%00";
        str = URLDecoder.decode(str);
        
        System.out.println(ZipUtil.uncompress(str));
//    	String temp = "{\"DevInfo\": {\"DI\": \"860157010327119-ewrfsdfsdfsdfsdf-b42e03d9cc43ff4c\",\"DB\": \"联想\",\"DM\": \"Lenovo S760\",\"SV\": \"2.3.4\",\"AVC\": \"1.3.4|89\",\"AK\": \"sdfsdfsdfgsdfg\",\"AC\": \"360\",\"AUI\": \"657893\",\"SDKV\": \"150208\",\"APILevel\": \"8\",\"MP\": \"联通\",\"PN\": \"13661190997\"},\"NPLInfo\": {\"NT\":\"2142343-3G|2142343-4G\",\"GL\": \"2142343-123-456|2142389-127-456\",\"PL\":\"1296035800-1296035890|1296035890-1296035900\"},\"IUUInfo\": [{\"APN\": \"com.qzone\",\"AN\": \"QQ空间\",\"AVC\": \"5.4.1|89\",\"AT\": \"1\",\"AHT\": \"1296035800\"}],\"OCInfo\": [{\"AOT\": \"1296035591\",\"ACT\": \"1296035599\",\"APN\": \"com.qzone\",\"AN\": \"QQ空间\",\"AVC\": \"5.4.1|89\"}],\"WebInfo\": [{\"URL\": \"http://www.baidu.com\",\"WOT\": \"1296035591\"}],\"InstalledAppInfo\": [{\"APN\": \"com.qzone\",\"AN\": \"QQ空间\",\"AVC\": \"5.4.1|89\",\"IN\": \"1\"}]}";   
//        System.out.println(ZipUtil.compress(temp));
      }   
  
}  
